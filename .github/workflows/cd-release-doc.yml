---
# Automates deploy of comptox_ai doc page to AWS on GitHub release
name: cd-release-doc

# Deployed on release or on workflow dispatch
on:
  release:
  workflow_dispatch:

# Define the jobs in the workflow
jobs:
  release-doc:
    runs-on: ubuntu-latest
    # # These permissions are needed to interact with
    # GitHub's OIDC Token endpoint.
    # permissions: id-token: write contents: read

    # # You can change the default value as needed
    # env:
    #   # Directory of docs
    #   doc-directory: ./docs

    steps:
      # Step: Check out the repository's code to the runner
      - name: checkout-code
        uses: actions/checkout@v3

      # Step: Install Node.js
      - name: install-node
        uses: actions/setup-node@v3
        with:
          node-version: '16.x'

      # Step: Deploy to server
      - name: deploy-to-server
        uses: easingthemes/ssh-deploy@v2
        with:
          SSH_PRIVATE_KEY: ${{ secrets.COMPTOX_AI_AWS_SSH }}
          REMOTE_HOST: 'ec2-54-92-148-244.compute-1.amazonaws.com'
          REMOTE_USER: 'ec2-user'
          SOURCE: ./docs/build/
          TARGET: '/home/ec2-user/ComptoxAiWeb'
# # Step: Configure AWS credentials from AWS role
# - name: configure-credential uses:
#   aws-actions/configure-aws-credentials@v3 with: role-to-assume:
#   arn:aws:iam::146408842325:role/comptox_ai_website aws-region:
#   us-east-1 run:
